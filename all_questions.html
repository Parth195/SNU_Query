<!DOCTYPE html>
<html>

<head>
    <title>SNU Query-Answer</title>
    <link href="assets/img/favicon.png" rel="icon">
    <link href="assets/img/favicon.png" rel="apple-touch-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            width: 80%;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 40px;
        }

        .question {
            width: 100%;
            background-color: #d3d6d6;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 40px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.3s;
        }

        .question:hover {
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .question-text {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .question-options {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .question-options i {
            cursor: pointer;
            margin-left: 10px;
        }

        .answers-button {
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .answers-button:hover {
            background-color: #2980b9;
        }

        .upvoted {
            color: #3498db;
        }

        .downvoted {
            color: #e74c3c;
        }

        .votes {
            font-weight: bold;
            margin-left: 5px;
        }

        .previously-answered-button {
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-right: 20px;
        }

        .previously-answered-button:hover {
            background-color: #27ae60;
        }

        .previously-answered {
            display: none;
            flex-wrap: wrap;
            justify-content: space-between;
            width: calc(100% - 30px);
            padding: 0px;
            background-color: #d3d6d6;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .previously-answered.active {
            display: flex;
        }

        .question,
        .answer,
        .previously-answered div {
            width: calc(100% - 30px);
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(67, 66, 66, 0.1);
        }

        .question h2,
        .answer h2 {
            font-size: 1.5rem;
        }

        .answer-form {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 600px;
            z-index: 1;
            padding: 20px;
            background-color: #ecf0f1;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .answer-form.active {
            display: block;
        }

        .answer-form span.close {
            position: absolute;
            top: -15px;
            right: -15px;
            cursor: pointer;
            z-index: 1;
            background-color: #fff;
            border-radius: 50%;
            padding: 6px;
            border: 1px solid #aaa;
        }

        .answer-form textarea {
            width: calc(100% - 22px);
            height: 200px;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            resize: none;
            text-align: left;
            padding-left: 10px;
            font-size: 16px;
        }

        .format-buttons {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }

        .format-button {
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
            margin: 0 10px;
            transition: background-color 0.3s;
        }

        .format-button:hover {
            background-color: #2980b9;
        }

        .post-answer {
            background-color: #27ae60;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .post-answer:hover {
            background-color: #219d54;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Questions and Answers</h1>

        <div class="question">
            <div class="question-text">
                <h2>Question 1</h2>
                <div class="question-options">
                    <i class="fas fa-thumbs-up upvote" onclick="toggleUpvote('upvotes-1')"></i><span
                        class="votes upvotes" id="upvotes-1">0</span>
                    <i class="fas fa-thumbs-down downvote" onclick="toggleDownvote('downvotes-1')"></i><span
                        class="votes downvotes" id="downvotes-1">0</span>
                </div>
            </div>
            <p>What is your question?</p>
            <div class="question-options">
                <button class="previously-answered-button" onclick="showPreviouslyAnswered('question-1')">Previously
                    Answered</button>
                <button class="answers-button" onclick="showAnswerForm('question-1')">Add an Answer</button>
            </div>
            <div class="answer-form" id="question-1-answer-form">
                <span class="close" onclick="closeAnswerForm('question-1')">X</span>
                <textarea id="question-1-answer" placeholder="Your Answer"></textarea>
                <div class="format-buttons">
                    <button class="format-button" onclick="formatText('question-1-answer', 'bold')"><b>B</b></button>
                    <button class="format-button" onclick="formatText('question-1-answer', 'italic')"><i>I</i></button>
                    <button class="format-button"
                        onclick="formatText('question-1-answer', 'underline')"><u>U</u></button>
                </div>
                <button class="post-answer" onclick="postAnswer('question-1')">Post Answer</button>
            </div>
        </div>

        <div class="previously-answered" id="question-1-answered">
            <div class="answer" style="border: 2px solid red;">
                <h2>Previous Answer 1</h2>
                <p>Answer 1</p>
            </div>
            <div class="answer" style="border: 2px solid red;">
                <h2>Previous Answer 2</h2>
                <p>Answer 2</p>
            </div>
        </div>

        <div class="question">
            <div class="question-text">
                <h2>Question 2</h2>
                <div class="question-options">
                    <i class="fas fa-thumbs-up upvote" onclick="toggleUpvote('upvotes-2')"></i><span
                        class="votes upvotes" id="upvotes-2">0</span>
                    <i class="fas fa-thumbs-down downvote" onclick="toggleDownvote('downvotes-2')"></i><span
                        class="votes downvotes" id="downvotes-2">0</span>
                </div>
            </div>
            <p>What is your question?</p>
            <div class="question-options">
                <button class="previously-answered-button" onclick="showPreviouslyAnswered('question-2')">Previously
                    Answered</button>
                <button class="answers-button" onclick="showAnswerForm('question-2')">Add an Answer</button>
            </div>
            <div class="answer-form" id="question-2-answer-form">
                <span class="close" onclick="closeAnswerForm('question-2')">X</span>
                <textarea id="question-2-answer" placeholder="Your Answer"></textarea>
                <div class="format-buttons">
                    <button class="format-button" onclick="formatText('question-2-answer', 'bold')"><b>B</b></button>
                    <button class="format-button" onclick="formatText('question-2-answer', 'italic')"><i>I</i></button>
                    <button class="format-button"
                        onclick="formatText('question-2-answer', 'underline')"><u>U</u></button>
                </div>
                <button class="post-answer" onclick="postAnswer('question-2')">Post Answer</button>
            </div>
        </div>

        <div class="previously-answered" id="question-2-answered">
            <div class="answer" style="border: 2px solid red;">
                <h2>Previous Answer 1 </h2>
                <p>Answer.....</p>
            </div>
            <div class="answer" style="border: 2px solid red;">
                <h2>Previous Answer 2 </h2>
                <p>Answer.....</p>
            </div>

            <script>
                function showPreviouslyAnswered(questionId) {
                    const previousAnswered = document.getElementById(questionId + "-answered");
                    previousAnswered.classList.toggle('active');
                }

                function showAnswerForm(questionId) {
                    const answerForm = document.getElementById(questionId + "-answer-form");
                    answerForm.classList.toggle('active');
                }

                function closeAnswerForm(questionId) {
                    const answerForm = document.getElementById(questionId + "-answer-form");
                    answerForm.classList.remove('active');
                }

                function postAnswer(questionId) {
                    const answerText = document.getElementById(questionId + "-answer").value;
                    // Code to post the answer goes here
                    console.log("Posting answer for Question " + questionId + ": " + answerText);
                    alert('Answer submitted');
                    location.reload();
                }

                function formatText(textAreaId, format) {
                    const textArea = document.getElementById(textAreaId);
                    const start = textArea.selectionStart;
                    const end = textArea.selectionEnd;

                    let prefix = '';
                    let suffix = '';

                    switch (format) {
                        case 'bold':
                            prefix = '<b>';
                            suffix = '</b>';
                            break;
                        case 'italic':
                            prefix = '<i>';
                            suffix = '</i>';
                            break;
                        case 'underline':
                            prefix = '<u>';
                            suffix = '</u>';
                            break;
                    }

                    const selectedText = textArea.value.substring(start, end);
                    const textBefore = textArea.value.substring(0, start);
                    const textAfter = textArea.value.substring(end);

                    const newText = textBefore + prefix + selectedText + suffix + textAfter;
                    textArea.value = newText;
                }


                function toggleUpvote(id) {
                    const upvoteCount = document.getElementById(id);
                    const upvote = upvoteCount.previousElementSibling;
                    const downvoteCount = document.getElementById('downvotes-' + id.split('-')[1]);
                    const downvote = downvoteCount.previousElementSibling;

                    if (upvote.classList.contains('upvoted')) {
                        upvote.classList.remove('upvoted');
                        upvoteCount.textContent = parseInt(upvoteCount.textContent) - 1;
                    } else {
                        upvote.classList.add('upvoted');
                        upvoteCount.textContent = parseInt(upvoteCount.textContent) + 1;

                        if (downvote.classList.contains('downvoted')) {
                            downvote.classList.remove('downvoted');
                            downvoteCount.textContent = parseInt(downvoteCount.textContent) - 1;
                        }
                    }
                }

                function toggleDownvote(id) {
                    const downvoteCount = document.getElementById(id);
                    const downvote = downvoteCount.previousElementSibling;
                    const upvoteCount = document.getElementById('upvotes-' + id.split('-')[1]);
                    const upvote = upvoteCount.previousElementSibling;

                    if (downvote.classList.contains('downvoted')) {
                        downvote.classList.remove('downvoted');
                        downvoteCount.textContent = parseInt(downvoteCount.textContent) - 1;
                    } else {
                        downvote.classList.add('downvoted');
                        downvoteCount.textContent = parseInt(downvoteCount.textContent) + 1;

                        if (upvote.classList.contains('upvoted')) {
                            upvote.classList.remove('upvoted');
                            upvoteCount.textContent = parseInt(upvoteCount.textContent) - 1;
                        }
                    }
                }
            </script>

        </div>
</body>

</html>