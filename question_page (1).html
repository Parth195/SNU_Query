<!DOCTYPE html>
<html>

<head>
    <title>Fetch Questions</title>
</head>

<body>
    <h1>Questions:</h1>
    <ul id="questionList"></ul>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDr8S2OmDIo5EsNU97uJWq3gQlqv8zitAI",
            authDomain: "snu-query.firebaseapp.com",
            databaseURL: "https://snu-query-default-rtdb.firebaseio.com",
            projectId: "snu-query",
            storageBucket: "snu-query.appspot.com",
            messagingSenderId: "350908354215",
            appId: "1:350908354215:web:146b8142a7db2549f15582",
            measurementId: "G-T7426ZGZWQ"
        };

        // Initialize Firebase
        const firebaseApp = initializeApp(firebaseConfig);
        const database = getDatabase(firebaseApp);
        const questionsRef = ref(database, "questions");

        const questionList = document.getElementById("questionList");

        // Function to fetch and display questions
        function fetchQuestions() {
            onValue(questionsRef, (snapshot) => {
                questionList.innerHTML = ''; // Clear the list

                const questions = snapshot.val();

                if (questions) {
                    for (const questionKey in questions) {
                        if (questions.hasOwnProperty(questionKey)) {
                            const question = questions[questionKey];
                            // Create a list item for each question
                            const listItem = document.createElement("li");
                            // Join the tags array into a string
                            const tags = question.tags.join("   ,    ");
                            // Use the correct syntax to include the tags and timestamp
                            listItem.textContent = `Author: ${question.author}, Question: ${question.text}, Tags: ${tags}, Timestamp: ${question.timestamp}`;
                            questionList.appendChild(listItem);
                        }
                    }
                }
            }, (error) => {
                console.error("Error fetching questions:", error);
            });
        }


        // Call the function to fetch questions
        fetchQuestions();
    </script>
</body>

</html>